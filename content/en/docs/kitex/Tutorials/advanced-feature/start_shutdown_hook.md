---
title: "Customize Hook for Start/Shutdown of Server-side"
date: 2022-07-23
weight: 5
description: >
---

Kitex provides a global Hook for injecting your processing logic on the server-side **after** triggering **startup** and **before exiting**.

Also, you can modify the main function to customize some processing logic **before** the server-side **starts** and **after** it **exits** (listening for port closures).

## After the server-side start and before exit

Since the server-side handles logic inside the framework after startup and before exit, users who want to customize the business logic need to use Hook.

## Inject StartHook triggered after startup

After triggering the Server start, the framework executes StartHooks and performs service registration. Note that since the Server starts asynchronously, the execution of this Hook is not guaranteed after the Server is fully ready.

- Usage

  ```go
  import "github.com/cloudwego/kitex/server"

  server.RegisterStartHooks(yourStartHook)
  // support for injecting multiple Hooks
  // server.RegisterStartHooks(hook)
  ```



### Inject ShutdownHook triggered before exit

After receiving an exit signal or when the user initiates a stop command, the framework executes ShutdownHooks first, followed by service logout (from the registry) and Shutdown of the service.

- Usage

```go
import "github.com/cloudwego/kitex/server"

server.RegisterShutdownHook(yourShundownHook)
// support inject multiple Hooks
// server.RegisterShutdownHook(hook)
```


# Before the server-side startup and after exist

Customizing the logic before and after the server-side starts and exits is easier for users. Add your processing logic before and after the execution of the Run() method in the main.go generated by the framework.

Note: The logic after Run() is executed after Server finishes exiting. If you want to execute your logic before Server exits, you should use ShutdownHook.

The following is an example of the main function generated by the framework, with your logic written in the place of comments.

```go
func main() {
	svr := greetservice.NewServer(new(GreetServiceImpl))

  // yourLogicBeforeServerRun()

	err := svr.Run()

  // yourLogicAfterServerRun()

	if err != nil {
		log.Println(err.Error())
	}
}

```
